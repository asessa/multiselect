{"version":3,"file":"multiselect.js","sources":["../src/multiselect.js"],"sourcesContent":["/**\n * @file multiselect.js\n * @author Andrea Sessa <andrea.sessa@gmail.com>\n */\n\nimport \"./multiselect.scss\";\n\n(function () {\n  this.multiselect = (selector, options) => {\n    let defaults = {\n      element: typeof selector === \"object\" ? selector : document.querySelector(selector),\n      search: true,\n      placeholder: \"select\",\n      selected: \"{N} selected\",\n    };\n\n    options = { ...defaults, ...options };\n\n    options.element.style.display = \"none\";\n\n    var div = createElement(\"div\", {\n      class: [\"dropdown\", \"multiselect-dropdown\"],\n    });\n    options.element.parentNode.insertBefore(div, options.element.nextSibling);\n\n    var btn = createElement(\"a\", {\n      class: [\"btn\", \"btn-primary\", \"dropdown-toggle\"],\n      href: \"#\",\n      role: \"button\",\n      \"data-bs-toggle\": \"dropdown\",\n      \"aria-expanded\": false,\n      \"data-bs-auto-close\": \"outside\",\n      id: \"dropdownMenu\" + options.element.id,\n    });\n    div.appendChild(btn);\n\n    var ul = createElement(\"ul\", { class: [\"dropdown-menu\", \"p-2\"], \"aria-labelledby\": btn.id });\n\n    Array.from(options.element.options).map((o) => {\n      let li = createElement(\"li\");\n      var a = createElement(\"a\", { \"data-value\": o.value });\n      var label = createElement(\"label\", { title: o.text });\n      let checkboxOptions = { class: [\"form-check-input\", \"me-1\"], type: \"checkbox\" };\n      if (o.selected) checkboxOptions[\"checked\"] = \"checked\";\n      var ic = createElement(\"input\", checkboxOptions);\n      ic.oe = o;\n      label.textContent = o.text;\n      label.prepend(ic);\n      a.appendChild(label);\n      li.appendChild(a);\n\n      ic.addEventListener(\"change\", (e) => {\n        e.target.oe.selected = e.target.checked;\n        div.refresh();\n      });\n\n      ul.appendChild(li);\n    });\n\n    div.refresh = () => {\n      var selectedOptions = Array.from(options.element.selectedOptions);\n      let selectedOptionsText = \"\";\n      console.log(selectedOptions.length);\n      if (selectedOptions.length == 0) selectedOptionsText = options.placeholder;\n      else if (selectedOptions.length >= 4)\n        selectedOptionsText = String(options.selected).replace(\"{N}\", selectedOptions.length);\n      else\n        selectedOptions.map((x) => {\n          if (selectedOptionsText.length > 0) selectedOptionsText += \", \";\n          selectedOptionsText += x.text;\n        });\n\n      btn.text = selectedOptionsText;\n    };\n    div.refresh();\n\n    div.appendChild(ul);\n  };\n\n  function createElement(tag, attrs) {\n    var e = document.createElement(tag);\n    if (attrs !== undefined)\n      Object.keys(attrs).forEach((k) => {\n        if (k === \"class\") attrs[k].forEach((o) => e.classList.add(o));\n        else if (k === \"style\")\n          Object.keys(attrs[k]).forEach((ks) => {\n            e.style[ks] = attrs[k][ks];\n          });\n        else if (k === \"text\") attrs[k] === \"\" ? (e.innerHTML = \"&nbsp;\") : (e.innerText = attrs[k]);\n        else e.setAttribute(k, attrs[k]);\n      });\n    return e;\n  }\n})();\n"],"names":["createElement","tag","attrs","e","document","undefined","Object","keys","forEach","k","o","classList","add","ks","style","innerHTML","innerText","setAttribute","this","multiselect","selector","options","defaults","element","querySelector","search","placeholder","selected","display","div","class","parentNode","insertBefore","nextSibling","btn","href","role","id","appendChild","ul","Array","from","map","li","a","value","label","title","text","checkboxOptions","type","ic","oe","textContent","prepend","addEventListener","target","checked","refresh","selectedOptions","selectedOptionsText","console","log","length","String","replace","x"],"mappings":";CAOA,WAwEE,SAASA,EAAcC,EAAKC,GAC1B,IAAIC,EAAIC,SAASJ,cAAcC,GAW/B,YAVcI,IAAVH,GACFI,OAAOC,KAAKL,GAAOM,SAASC,IAChB,UAANA,EAAeP,EAAMO,GAAGD,SAASE,GAAMP,EAAEQ,UAAUC,IAAIF,KAC5C,UAAND,EACPH,OAAOC,KAAKL,EAAMO,IAAID,SAASK,IAC7BV,EAAEW,MAAMD,GAAMX,EAAMO,GAAGI,MAEZ,SAANJ,EAA2B,KAAbP,EAAMO,GAAaN,EAAEY,UAAY,SAAaZ,EAAEa,UAAYd,EAAMO,GACpFN,EAAEc,aAAaR,EAAGP,EAAMO,OAE1BN,EAnFTe,KAAKC,YAAc,CAACC,EAAUC,KAC5B,IAAIC,EAAW,CACbC,QAA6B,iBAAbH,EAAwBA,EAAWhB,SAASoB,cAAcJ,GAC1EK,QAAQ,EACRC,YAAa,SACbC,SAAU,iBAGZN,EAAU,IAAKC,KAAaD,IAEpBE,QAAQT,MAAMc,QAAU,OAEhC,IAAIC,EAAM7B,EAAc,MAAO,CAC7B8B,MAAO,CAAC,WAAY,0BAEtBT,EAAQE,QAAQQ,WAAWC,aAAaH,EAAKR,EAAQE,QAAQU,aAE7D,IAAIC,EAAMlC,EAAc,IAAK,CAC3B8B,MAAO,CAAC,MAAO,cAAe,mBAC9BK,KAAM,IACNC,KAAM,SACN,iBAAkB,WAClB,iBAAiB,EACjB,qBAAsB,UACtBC,GAAI,eAAiBhB,EAAQE,QAAQc,KAEvCR,EAAIS,YAAYJ,GAEhB,IAAIK,EAAKvC,EAAc,KAAM,CAAE8B,MAAO,CAAC,gBAAiB,OAAQ,kBAAmBI,EAAIG,KAEvFG,MAAMC,KAAKpB,EAAQE,QAAQF,SAASqB,KAAKhC,IACvC,IAAIiC,EAAK3C,EAAc,MACvB,IAAI4C,EAAI5C,EAAc,IAAK,CAAE,aAAcU,EAAEmC,QACzCC,EAAQ9C,EAAc,QAAS,CAAE+C,MAAOrC,EAAEsC,OAC9C,IAAIC,EAAkB,CAAEnB,MAAO,CAAC,mBAAoB,QAASoB,KAAM,YAC/DxC,EAAEiB,WAAUsB,EAAyB,QAAI,WAC7C,IAAIE,EAAKnD,EAAc,QAASiD,GAChCE,EAAGC,GAAK1C,EACRoC,EAAMO,YAAc3C,EAAEsC,KACtBF,EAAMQ,QAAQH,GACdP,EAAEN,YAAYQ,GACdH,EAAGL,YAAYM,GAEfO,EAAGI,iBAAiB,UAAWpD,IAC7BA,EAAEqD,OAAOJ,GAAGzB,SAAWxB,EAAEqD,OAAOC,QAChC5B,EAAI6B,aAGNnB,EAAGD,YAAYK,MAGjBd,EAAI6B,QAAU,KACZ,IAAIC,EAAkBnB,MAAMC,KAAKpB,EAAQE,QAAQoC,iBACjD,IAAIC,EAAsB,GAC1BC,QAAQC,IAAIH,EAAgBI,QACE,GAA1BJ,EAAgBI,OAAaH,EAAsBvC,EAAQK,YACtDiC,EAAgBI,QAAU,EACjCH,EAAsBI,OAAO3C,EAAQM,UAAUsC,QAAQ,MAAON,EAAgBI,QAE9EJ,EAAgBjB,KAAKwB,IACfN,EAAoBG,OAAS,IAAGH,GAAuB,MAC3DA,GAAuBM,EAAElB,QAG7Bd,EAAIc,KAAOY,GAEb/B,EAAI6B,UAEJ7B,EAAIS,YAAYC,IArEpB"}